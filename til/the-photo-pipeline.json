{"html":"<style>\n  picture img {\n    max-height: 70vh;\n    max-width: 84vw !important;\n    width: auto !important;\n  }\n</style>\n<p><picture>\n  <source srcset=\"https://storage.sbg.cloud.ovh.net/v1/AUTH_0ea6be3f528d4bacb871d2c2d541a7b9/photos/DSC09362/1080.webp\" type=\"image/webp\" />\n  <source srcset=\"https://storage.sbg.cloud.ovh.net/v1/AUTH_0ea6be3f528d4bacb871d2c2d541a7b9/photos/DSC09362/1080.jpg\" type=\"image/jpeg\" />\n  <img src=\"https://storage.sbg.cloud.ovh.net/v1/AUTH_0ea6be3f528d4bacb871d2c2d541a7b9/photos/DSC09362/1080.jpg\" alt={photo.metadata.id} />\n</picture></p>\n<p>I like to take pictures and I like to share my pictures. I also use like Instagram, but I don't like the feeling when you post a picture, get engaged by the likes, become a zombie scrolling and scrolling forever, feeling like a lot of pictures look similar to others, letting Facebook to <strong>own</strong> your pictures and try to sell you stuff all the time…</p>\n<p>And I also guess that sooner or later Instagram will pass away — it happened to many services now. </p>\n<p>So I want something reliable, no comments, no likes, just to post some pictures on <em><a href=\"/photos\">the internet</a></em>.</p>\n<h3 id=\"automating-the-way\">Automating the way</h3>\n<p>Currently this static site is hosted using Github pages. For the size, and quantity of files I intend to post I'm rather going with a different approach. I thought about using AWS S3, I've used it before and suits my needs. But for <a href=\"/\">alextorres.me</a> I want to keep it a bit more local, at least an European company which gives me more confidence and has better values, so I decided to go with <a href=\"https://www.ovh.com/world/manifesto.xml\">OVH</a>. They have a service called Object Storage based in OpenStack with an API compatible with S3, so why not? </p>\n<p>The usual process for pushing pictures in here will be something like: </p>\n<ol>\n<li>Take the picture</li>\n<li>Resize it to three resolutions: 256 (Thumbnail), 1080 (Display), Original (Download)</li>\n<li>Convert to WebP and JPG</li>\n<li>Push the image to OVH Object Storage</li>\n<li>Extract metadata of the image</li>\n<li>Get a JSON with the image Metadata + URLs of the storage location</li>\n<li>Commit the new JSON to the <a href=\"https://github.com/AlexRex/alextorres.me\">github repo</a></li>\n</ol>\n<p>It looks like a good candidate for automation right? After tinkering a bit with it there you go: <a href=\"https://github.com/AlexRex/thephotopipeline\">The Photo Pipeline</a></p>\n<p>It is missing to commit directly to the Github Repo, but that way is a bit more generic. </p>\n<h3 id=\"displaying-the-pictures\">Displaying the pictures</h3>\n<p>I am trying to be a good internet citizen, so I won't let your mobile data plan break because you missclicked on my photo gallery. </p>\n<p>Therefore, I resize the pictures to 3 resolutions:</p>\n<ul>\n<li><strong>256</strong>: Used to display the thumbnails in the gallery view</li>\n<li><strong>1080</strong>: For the single photo view </li>\n<li><strong>Original</strong>: Downloadable verison</li>\n</ul>\n<p>And create two copies: JPEG and <a href=\"https://developers.google.com/speed/webp\">WebP</a>.</p>\n<p>Finally, I rely on the <code>picture</code> <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture\">HTML element</a> to either display a WebP version or JPEG version, depending on browser compatibility: </p>\n<pre><code class=\"html language-html\">&lt;picture&gt;\n  &lt;source srcset={photo.resolutions['1080'].webpFile} type=\"image/webp\" /&gt;\n  &lt;source srcset={photo.resolutions['1080'].jpgFile} type=\"image/jpeg\" /&gt;\n  &lt;img src={photo.resolutions['1080'].jpgFile} alt={photo.metadata.id} /&gt;\n&lt;/picture&gt;</code></pre>","metadata":{"title":"The photo pipeline","summary":"A way of manging my own photo gallery","date":"2020-05-28T00:00:00.000Z","tags":"photography, selfhosted, alextorres.me","draft":false,"slug":"the-photo-pipeline"},"filename":"the-photo-pipeline.md","path":"/home/runner/work/alextorres.me/alextorres.me/src/posts/the-photo-pipeline.md"}