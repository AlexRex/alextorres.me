<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=global.css rel=stylesheet> <link href="https://fonts.googleapis.com/css?family=Space+Mono|Work+Sans:300,400&display=swap" rel=stylesheet> <link href=favicon.ico rel=icon type=image/png> <link href=client/main.1897727743.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Hey there, I am using Sapper (Svelte)</title><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-1rre5r6><div class="svelte-1rre5r6 name"><h1><a href=/ class=svelte-1a59aal style='--theme-color:rgba(166, 186, 61, 0.5);--theme-content:"alex torres"'>alex torres</a></h1></div> <div class="svelte-1rre5r6 links"><h2 class=svelte-1rre5r6><a href=/bio class=svelte-1a59aal style='--theme-color:rgba(254, 101, 1, 0.7);--theme-content:"bio"'>bio</a></h2> <h2 class=svelte-1rre5r6><a href=/til class=svelte-1a59aal style='--theme-color:rgba(255, 237, 13, 1);--theme-content:"til"'>til</a></h2> <h2 class=svelte-1rre5r6><a href="mailto:alejandro.torres.mateu@gmail.com?subject=Hey Alex! 🥝&body=Hi Alex, I am {YOUR_NAME}, I want to talk to you about [...]." class=svelte-1a59aal style='--theme-color:rgba(174, 204, 199, 1);--theme-content:"contact"'>contact</a></h2></div></nav> <main class=svelte-ggff4g> <div class="svelte-1a1y3de content"><h3 class=svelte-1a1y3de>5/24/2020 · <a href="til?tag=sapper">#sapper</a>  <a href="til?tag=svelte">#svelte</a>  <a href="til?tag=javascript">#javascript</a>  <a href="til?tag=software">#software</a>  <a href="til?tag=ecosoftware">#ecosoftware</a>  </h3> <h1 class=svelte-1a1y3de>Hey there, I am using Sapper (Svelte)</h1> <div class="svelte-1a1y3de post-html"><p>When I built this site in 2018 I wanted to learn something new, so I used <a href=https://nextjs.org/ >NextJS</a>, a ReactJS framework to build Server Side Rendered and Static Sites — which is pretty fun to work with.</p> <p>Honestly, rewriting it to Sapper was something I didn't need to do. But as I wanted to add the <a href=/til>TIL</a> section to the page, I thought: Ok, why not? Let's learn something new. </p> <p>So this is the site audit with Lighthouse with the NextJS build: </p> <p><img alt=performance-next src=/posts/improve-site/performance-next.webp></p> <p>So now the turn for Sapper. The steps I did are dead simple: </p> <ol> <li>Go straight to the <a href=https://sapper.svelte.dev/docs>Sapper Docs</a>.</li> <li>Clone the starter template.</li> <li>Migrate the React components to Sapper with the same styles.</li> <li>…Boom.</li> </ol> <p><img alt=performance-next src=/posts/improve-site/performance-sapper.webp></p> <p>This is straight from the template using the exported build (static generated html files, no server side needed).<br> It takes 150kB space to download the main page. Funny thing, 45kB are just the fonts from <a href=https://fonts.google.com/ >Google Fonts</a>, and 17kB the Favicon. I guess I'll need to cut the size off on that small icon soon…</p> <p>The same stuff with NextJS takes up to 300kB, doubling the space. It may not look like much more space—a 1 hour movie in any streaming service can be more than 1 GB—but after reading for a while, I am getting more and more concern of how we waste the resources in the digital world, and how we can adapt the so-called ecological digital design. For instance, there's this French Studio called <a href=https://fairness.coop/ >Fairness.coop</a> (in French) which is aiming to develop all of their products in the most sustainable way, so they have the less ecological impact possible. </p> <p>Coming back to the topic, to be really fair with NextJS: </p> <ol> <li>I am using a pretty outdated version.</li> <li>I didn't pay too much attention on optimizing the code.</li> </ol> <p>So I guess the build size and performance can be really boosted to the same level as the Sapper one using a proper version and taking time into optimizations. </div></div></main> <div class=svelte-1p9jtq9>2020 Alex Torres</div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{html:"\u003Cp\u003EWhen I built this site in 2018 I wanted to learn something new, so I used \u003Ca href=\"https:\u002F\u002Fnextjs.org\u002F\"\u003ENextJS\u003C\u002Fa\u003E, a ReactJS framework to build Server Side Rendered and Static Sites — which is pretty fun to work with.\u003C\u002Fp\u003E\n\u003Cp\u003EHonestly, rewriting it to Sapper was something I didn't need to do. But as I wanted to add the \u003Ca href=\"\u002Ftil\"\u003ETIL\u003C\u002Fa\u003E section to the page, I thought: Ok, why not? Let's learn something new. \u003C\u002Fp\u003E\n\u003Cp\u003ESo this is the site audit with Lighthouse with the NextJS build: \u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fposts\u002Fimprove-site\u002Fperformance-next.webp\" alt=\"performance-next\" \u002F\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ESo now the turn for Sapper. The steps I did are dead simple: \u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003EGo straight to the \u003Ca href=\"https:\u002F\u002Fsapper.svelte.dev\u002Fdocs\"\u003ESapper Docs\u003C\u002Fa\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003EClone the starter template.\u003C\u002Fli\u003E\n\u003Cli\u003EMigrate the React components to Sapper with the same styles.\u003C\u002Fli\u003E\n\u003Cli\u003E…Boom.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fposts\u002Fimprove-site\u002Fperformance-sapper.webp\" alt=\"performance-next\" \u002F\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThis is straight from the template using the exported build (static generated html files, no server side needed).\u003Cbr \u002F\u003E\nIt takes 150kB space to download the main page. Funny thing, 45kB are just the fonts from \u003Ca href=\"https:\u002F\u002Ffonts.google.com\u002F\"\u003EGoogle Fonts\u003C\u002Fa\u003E, and 17kB the Favicon. I guess I'll need to cut the size off on that small icon soon…\u003C\u002Fp\u003E\n\u003Cp\u003EThe same stuff with NextJS takes up to 300kB, doubling the space. It may not look like much more space—a 1 hour movie in any streaming service can be more than 1 GB—but after reading for a while, I am getting more and more concern of how we waste the resources in the digital world, and how we can adapt the so-called ecological digital design. For instance, there's this French Studio called \u003Ca href=\"https:\u002F\u002Ffairness.coop\u002F\"\u003EFairness.coop\u003C\u002Fa\u003E (in French) which is aiming to develop all of their products in the most sustainable way, so they have the less ecological impact possible. \u003C\u002Fp\u003E\n\u003Cp\u003EComing back to the topic, to be really fair with NextJS: \u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003EI am using a pretty outdated version.\u003C\u002Fli\u003E\n\u003Cli\u003EI didn't pay too much attention on optimizing the code.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003ESo I guess the build size and performance can be really boosted to the same level as the Sapper one using a proper version and taking time into optimizations. \u003C\u002Fp\u003E",metadata:{title:"Hey there, I am using Sapper (Svelte)",summary:"How I improved the performance and size of this site using Svelte",date:"2020-05-24T00:00:00.000Z",tags:"sapper, svelte, javascript, software, ecosoftware",slug:"hey-there-i-am-using-sapper-svelte"},filename:"improve-site-performance-sapper.md",path:"\u002FUsers\u002Ftorrealj\u002FDev\u002Fpersonal\u002Falextorres.me\u002Fsrc\u002Fposts\u002Fimprove-site-performance-sapper.md"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.d3e4c847.js"}catch(e){main="/client/legacy/client.77e2a907.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 